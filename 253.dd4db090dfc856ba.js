"use strict";(self.webpackChunkangular_messenger=self.webpackChunkangular_messenger||[]).push([[253],{1253:(dt,v,s)=>{s.r(v),s.d(v,{YoRHaModule:()=>gt});var p=s(6814),_=s(4087),t=s(5879),l=s(6223),Z=s(2181),c=s(676),b=s(8212),u=s(3938),d=s(2601),x=s(7466),h=s(7818);function O(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription)," seconds ")}}function w(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,a=t.oxw(2);return t.KtG(a.openDeleteModal(i.id.S))}),t.ALo(1,"async"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}if(2&o){const e=t.oxw(3);t.Q6J("disabled",e.isCreateMode||t.lcZ(1,1,e.isGroupLoading$)||!1)}}function T(o,r){if(1&o&&(t.TgZ(0,"li",12)(1,"a",13),t._uU(2),t.qZA(),t.YNc(3,w,4,3,"button",14),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("routerLink","/group/"+e.id.S),t.xp6(1),t.Oqu(e.name.S),t.xp6(1),t.Q6J("ngIf",e.createdBy.S===n.currentLocalStorageUID.uid)}}function P(o,r){if(1&o&&(t.TgZ(0,"div",9)(1,"ul",10),t.YNc(2,T,4,3,"li",11),t.qZA()()),2&o){const e=r.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",16)(2,"h2",17),t._uU(3," Are you sure you want to delete this group? "),t.qZA(),t.TgZ(4,"div",18)(5,"app-cyber-button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete())}),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"app-cyber-button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelGroupDelete())}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("disabled",t.lcZ(6,3,e.isGroupLoading$)||!1)("buttonText","Delete"),t.xp6(2),t.Q6J("buttonText","Cancel")}}function G(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," Please enter a name "),t.qZA())}function I(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," The name exceeds 30 characters "),t.qZA())}function L(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," The name must contain only letters, numbers, or spaces "),t.qZA())}function A(o,r){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,G,2,0,"small",5),t.YNc(2,I,2,0,"small",5),t.YNc(3,L,2,0,"small",5),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getError("name","required")),t.xp6(1),t.Q6J("ngIf",e.getError("name","maxlength")),t.xp6(1),t.Q6J("ngIf",e.getError("name","pattern"))}}const D=function(o){return{invalid:o}};function S(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",22)(1,"h2",23),t._uU(2,"Create group"),t.qZA(),t.TgZ(3,"div",24)(4,"label",25),t._uU(5,"group name"),t.qZA(),t._UZ(6,"input",26),t.YNc(7,A,4,3,"div",27),t.qZA(),t.TgZ(8,"div",28)(9,"app-cyber-button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onCreateGroupSubmit())}),t.ALo(10,"async"),t.qZA(),t.TgZ(11,"app-cyber-button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onCancelCreate())}),t.qZA()()()}if(2&o){const e=t.oxw(2);t.Q6J("formGroup",e.groupForm),t.xp6(3),t.Q6J("ngClass",t.VKq(8,D,(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid))),t.xp6(4),t.Q6J("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),t.xp6(2),t.Q6J("disabled",e.groupForm.invalid||t.lcZ(10,6,e.isGroupLoading$)||!1)("buttonText","Create"),t.xp6(2),t.Q6J("buttonText","Cancel")}}function J(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,S,12,10,"form",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.groupForm)}}function U(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}let F=(()=>{class o{constructor(e,n,i){this.store=e,this.fb=n,this.timerService=i,this.showDeleteModal=!1,this.isCreateMode=!1,this.countdownKey="groupTimer",this.currentGroupId=null}ngOnInit(){this.initGroupListDispatch(),this.getLocalStorageUid(),this.initForm(),this.initGroupItemsObservable(),this.initIsGroupLoadingObservable(),this.initCountdownSubscription()}initGroupItemsObservable(){this.groupItems$=this.store.pipe((0,c.Ys)(b.F$)),this.createGroupSubscription=this.groupItems$.pipe((0,Z.h)(e=>null!==e)).subscribe(()=>{this.onCancelCreate(),this.cancelGroupDelete()})}initIsGroupLoadingObservable(){this.isGroupLoading$=this.store.pipe((0,c.Ys)(b.mH))}initCountdownSubscription(){this.countdownSubscription=this.timerService.getTimer(this.countdownKey)}initGroupListDispatch(){this.store.dispatch((0,u.PT)())}onRefreshClick(){this.store.dispatch((0,u.HJ)())}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorageUID=JSON.parse(e))}initForm(){this.groupForm=this.fb.group({name:["",[l.kI.required,l.kI.maxLength(30),l.kI.pattern(/^[a-zA-Z0-9 ]*$/)]]})}get name(){return this.groupForm?.get("name")}getError(e,n){return this.groupForm?.get(e)?.hasError(n)}onCreateClick(){this.isCreateMode=!0}onCreateGroupSubmit(){if(this.groupForm?.valid){const n={name:this.groupForm.value.name,createdAt:(new Date).toISOString(),createdBy:this.currentLocalStorageUID.uid};this.store.dispatch((0,u.sS)(n))}}onCancelCreate(){this.groupForm?.reset(),this.isCreateMode=!1}openDeleteModal(e){e&&(this.currentGroupId=e),this.showDeleteModal=!0}cancelGroupDelete(){this.currentGroupId=null,this.showDeleteModal=!1}confirmDelete(){const e=this.currentGroupId;e&&this.store.dispatch((0,u.iE)({groupId:e}))}ngOnDestroy(){this.createGroupSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(c.yh),t.Y36(l.qu),t.Y36(d.f))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-grouplist"]],decls:21,vars:18,consts:[[1,"group"],[1,"group__buttons"],[1,"group__buttons__create"],[3,"buttonText","disabled","click"],[1,"group__buttons__refresh"],[4,"ngIf"],[1,"group__buttons__refresh__button",3,"disabled","click"],["class","group__list",4,"ngIf","ngIfElse"],["loading",""],[1,"group__list"],[1,"group__list__items"],["class","group__list__item",4,"ngFor","ngForOf"],[1,"group__list__item"],[1,"group__list__item__link",3,"routerLink"],["type","button","class","group__list__item__delete",3,"disabled","click",4,"ngIf"],["type","button",1,"group__list__item__delete",3,"disabled","click"],[1,"group__modal"],[1,"group__modal__title"],[1,"group__modal__buttons"],[3,"disabled","buttonText","click"],[3,"buttonText","click"],["class","group__form",3,"formGroup",4,"ngIf"],[1,"group__form",3,"formGroup"],[1,"group__form__title"],[1,"group__form__control",3,"ngClass"],["for","name"],["id","name","type","text","formControlName","name","autocomplete","name"],["class","validation",4,"ngIf"],[1,"group__form__buttons"],[1,"validation"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Groups"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"app-cyber-button",3),t.NdJ("click",function(){return i.onCreateClick()}),t.ALo(6,"async"),t.qZA()(),t.TgZ(7,"div",4),t.YNc(8,O,3,3,"div",5),t.ALo(9,"async"),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onRefreshClick()}),t.ALo(11,"async"),t.ALo(12,"async"),t.TgZ(13,"mat-icon"),t._uU(14,"refresh"),t.qZA()()()(),t.YNc(15,P,3,1,"div",7),t.ALo(16,"async"),t.YNc(17,k,8,5,"div",5),t.YNc(18,J,2,1,"div",5),t.YNc(19,U,2,0,"ng-template",null,8,t.W1O),t.qZA()),2&n){const a=t.MAs(20);t.xp6(5),t.Q6J("buttonText","Create")("disabled",i.showDeleteModal||t.lcZ(6,8,i.isGroupLoading$)||!1),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,10,i.countdownSubscription)),t.xp6(2),t.Q6J("disabled",t.lcZ(11,12,i.countdownSubscription)||t.lcZ(12,14,i.isGroupLoading$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(16,16,i.groupItems$))("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",i.showDeleteModal),t.xp6(1),t.Q6J("ngIf",i.isCreateMode)}},dependencies:[p.mk,p.sg,p.O5,x.w,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,h.Hw,_.rH,p.Ov],styles:['[_nghost-%COMP%]{max-width:800px;padding:1rem 2rem 1rem 1rem;width:100%}.group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.group__buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.group__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.group__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.group__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.group__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem;padding-right:.1rem;max-height:670px;overflow-y:auto;overflow-x:hidden}.group__list__item[_ngcontent-%COMP%]{position:relative;height:2rem;line-height:2rem;padding-left:2rem;width:96%;background-color:var(--color-mid);transition:all .3s ease}.group__list__item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-alert-trans)}.group__list__item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-alert-trans)}.group__list__item[_ngcontent-%COMP%]:hover{background-color:var(--color-alert-trans)}.group__list__item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:var(--color-high)}.group__list__item[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-high)}.group__list__item[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-high)}.group__list__item__delete[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;background-color:transparent;border:none;right:-1.6rem;top:50%;transform:translateY(-50%);cursor:var(--cursor-pointer)}.group__list__item__delete[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.group__list__item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:var(--color-alert-trans);font-weight:600;text-decoration:none}',".group__form[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--background-auth);border-radius:10px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.group__form__title[_ngcontent-%COMP%]{margin-bottom:1rem}.group__form__control[_ngcontent-%COMP%]{color:var(--color-low)}.group__form__control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:3rem;border-color:transparent;background-color:var(--background);outline-color:var(--primary);margin-top:1rem;padding:1rem}.group__form__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}.validation[_ngcontent-%COMP%], .invalid[_ngcontent-%COMP%]{color:var(--danger-color)}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--danger-color);outline-color:var(--danger-color)}",".group__modal[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--color-high-trans);border-radius:10px;min-height:300px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.group__modal__title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;padding-right:6rem}.group__modal__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}"]})}return o})();const N=function(){return["/profile"]};let Y=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile-link"]],decls:3,vars:2,consts:[[1,"profile"],[1,"profile__link",3,"routerLink"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"Profile"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,N)))},dependencies:[_.rH],styles:[".profile[_ngcontent-%COMP%]{position:absolute;bottom:16.2rem;left:-12.5rem;transform:rotate(-90deg);background-color:var(--color-alert-trans);transition:all .3s ease;box-shadow:5px 5px 1px 2px var(--font-dark)}.profile__link[_ngcontent-%COMP%]{display:inline-block;font-size:4.9rem;text-decoration:none;color:var(--color-high-trans);letter-spacing:2.4rem;font-weight:700}.profile__link[_ngcontent-%COMP%]:hover{color:var(--color-high)}.profile[_ngcontent-%COMP%]:hover{background-color:var(--font-dark);box-shadow:5px 5px 1px 2px var(--color-alert)}"]})}return o})();var C=s(3989),M=s(6331);function Q(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription$)," seconds ")}}function q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",10)(1,"button",11),t.NdJ("click",function(){const a=t.CHM(e).$implicit,mt=t.oxw(2);return t.KtG(mt.onStartConversationWithUser(a.uid.S))}),t._uU(2),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(2),t.hij(" ",e.name.S," ")}}function $(o,r){if(1&o&&(t.TgZ(0,"div",7)(1,"ul",8),t.YNc(2,q,3,1,"li",9),t.qZA()()),2&o){const e=r.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function j(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}let H=(()=>{class o{constructor(e,n){this.store=e,this.timerService=n,this.countdownKey="peopleTimer"}ngOnInit(){this.getLocalStorageUid(),this.initPeopleListDispatch(),this.initPeopleItemsObservable(),this.initIsPeopleListLoadingObservable(),this.initCountdownSubscription()}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorage=JSON.parse(e))}initPeopleListDispatch(){this.store.dispatch((0,C.I$)(this.currentLocalStorage))}initPeopleItemsObservable(){this.peopleItems$=this.store.pipe((0,c.Ys)(M.P7))}onUpdatePeopleList(){this.store.dispatch((0,C.ND)(this.currentLocalStorage))}initIsPeopleListLoadingObservable(){this.isPeopleListLoading$=this.store.pipe((0,c.Ys)(M.I$))}initCountdownSubscription(){this.countdownSubscription$=this.timerService.getTimer(this.countdownKey)}onStartConversationWithUser(e){console.log(e)}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(c.yh),t.Y36(d.f))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-people-list"]],decls:16,vars:12,consts:[[1,"people"],[1,"people__buttons"],[1,"people__buttons__refresh"],[4,"ngIf"],[1,"people__buttons__refresh__button",3,"disabled","click"],["class","people__list",4,"ngIf","ngIfElse"],["loading",""],[1,"people__list"],[1,"people__list__items"],["class","people__list__item",4,"ngFor","ngForOf"],[1,"people__list__item"],[1,"people__list__item__button",3,"click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"People"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2),t.YNc(5,Q,3,3,"div",3),t.ALo(6,"async"),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onUpdatePeopleList()}),t.ALo(8,"async"),t.ALo(9,"async"),t.TgZ(10,"mat-icon"),t._uU(11,"refresh"),t.qZA()()()(),t.YNc(12,$,3,1,"div",5),t.ALo(13,"async"),t.YNc(14,j,2,0,"ng-template",null,6,t.W1O),t.qZA()),2&n){const a=t.MAs(15);t.xp6(5),t.Q6J("ngIf",t.lcZ(6,4,i.countdownSubscription$)),t.xp6(2),t.Q6J("disabled",t.lcZ(8,6,i.isPeopleListLoading$)||t.lcZ(9,8,i.countdownSubscription$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(13,10,i.peopleItems$))("ngIfElse",a)}},dependencies:[p.sg,p.O5,h.Hw,p.Ov],styles:['[_nghost-%COMP%]{max-width:800px;padding:1rem 1rem 1rem 2rem;width:100%}.people[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.people__buttons[_ngcontent-%COMP%]{width:100%;display:flex;min-height:55px;justify-content:space-between;align-items:center;flex-direction:row-reverse}.people__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.people__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.people__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.people__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem;padding-right:.1rem;max-height:670px;overflow-y:auto;overflow-x:hidden}.people__list__item[_ngcontent-%COMP%]{position:relative;height:2rem;line-height:2rem;padding-left:2rem;background-color:var(--color-mid);transition:all .3s ease}.people__list__item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-alert-trans)}.people__list__item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-alert-trans)}.people__list__item[_ngcontent-%COMP%]:hover{background-color:var(--color-alert-trans)}.people__list__item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:var(--color-high)}.people__list__item[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-high)}.people__list__item[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-high)}.people__list__item__button[_ngcontent-%COMP%]{color:var(--color-alert-trans);font-weight:600;background-color:transparent;border:none;width:100%;height:100%;text-align:left;cursor:var(--cursor-pointer)}']})}return o})(),E=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-home-page"]],decls:3,vars:0,template:function(n,i){1&n&&t._UZ(0,"app-grouplist")(1,"app-people-list")(2,"app-profile-link")},dependencies:[F,Y,H],styles:['[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]:before{content:"";position:absolute;top:2rem;left:50%;transform:translate(-50%);height:calc(100% - 4rem);width:1px;background-color:var(--color-alert)}']})}return o})();var z=s(8645),f=s(9773),y=s(3997),K=s(3620),g=s(8041),R=s(2599);const m=(0,c.ZF)(R.Ff),X=((0,c.P1)(m,o=>o.groupConversationItems),(0,c.P1)(m,o=>o.loading)),W=["scrollContainer"];function tt(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription$)," seconds ")}}function et(o,r){if(1&o&&(t.TgZ(0,"li",18)(1,"div",18)(2,"p",19),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div",20)(6,"div",21),t._uU(7," Icon "),t.qZA(),t.TgZ(8,"div",22)(9,"div",23)(10,"span",24),t._uU(11),t.qZA(),t.TgZ(12,"span",25),t._uU(13),t.ALo(14,"date"),t.qZA()(),t.TgZ(15,"p",26),t._uU(16),t.qZA()()()()()),2&o){const e=r.$implicit;t.xp6(3),t.hij(" ",t.xi3(4,4,e.createdAt.S,"longDate")," "),t.xp6(8),t.hij(" ",e.authorID.S,""),t.xp6(2),t.Oqu(t.xi3(14,7,e.createdAt.S,"shortDate")),t.xp6(3),t.hij(" ",e.message.S," ")}}function ot(o,r){if(1&o&&(t.TgZ(0,"div",14)(1,"ul",15,16),t.YNc(3,et,17,10,"li",17),t.qZA()()),2&o){const e=r.ngIf;t.xp6(3),t.Q6J("ngForOf",e)}}function nt(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," Please enter a message "),t.qZA())}function it(o,r){if(1&o&&(t.TgZ(0,"div",33),t.YNc(1,nt,2,0,"small",7),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getError("message","required"))}}const rt=function(o){return{invalid:o}};function st(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",27)(1,"div",28),t._UZ(2,"input",29),t.YNc(3,it,2,1,"div",30),t.qZA(),t.TgZ(4,"div",31)(5,"app-cyber-button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSendConversationMessage())}),t.ALo(6,"async"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.groupConversationForm),t.xp6(1),t.Q6J("ngClass",t.VKq(7,rt,(null==e.message?null:e.message.touched)&&(null==e.message?null:e.message.invalid))),t.xp6(2),t.Q6J("ngIf",(null==e.message?null:e.message.touched)&&(null==e.message?null:e.message.invalid)),t.xp6(2),t.Q6J("disabled",e.groupConversationForm.invalid||t.lcZ(6,5,e.isgroupMessageLoading$)||!1)("buttonText","Send")}}function at(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}function lt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",34)(2,"h2",35),t._uU(3," Are you sure you want to delete this group? "),t.qZA(),t.TgZ(4,"div",36)(5,"app-cyber-button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete())}),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"app-cyber-button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelGroupDelete())}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("disabled",t.lcZ(6,3,e.isgroupMessageLoading$)||!1)("buttonText","Delete"),t.xp6(2),t.Q6J("buttonText","Cancel")}}const ct=function(){return["/"]},pt=[{path:"",component:E},{path:"group/:groupID",component:(()=>{class o{constructor(e,n,i,a){this.route=e,this.store=n,this.timerService=i,this.fb=a,this.since=null,this.currentGroupID=null,this.ngUnsubscribe=new z.x,this.showDeleteModal=!1,this.debounceDelay=1e3}ngOnInit(){this.initForm(),this.getLocalStorageUid(),this.initIsGroupMessagesLoadingObservable(),this.route.paramMap.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(e=>{e&&(this.currentGroupID=e.get("groupID"))}),this.currentGroupID&&(this.initSinceValueObservable(this.currentGroupID),this.initCountdownSubscription(this.currentGroupID))}initForm(){this.groupConversationForm=this.fb.group({message:["",[l.kI.required]]})}get message(){return this.groupConversationForm?.get("message")}getError(e,n){return this.groupConversationForm?.get(e)?.hasError(n)}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorage=JSON.parse(e))}initGroupConverstionDispatch(e,n){this.store.dispatch((0,g.p1)({groupID:e,since:n}))}initGroupConverstionItemsObservable(e){this.items$=this.store.pipe((0,c.Ys)((o=>(0,c.P1)(m,r=>r.groupConversationItems&&r.groupConversationItems[o]?r.groupConversationItems[o].groupConversationItem:null))(e)),(0,y.x)())}initSinceValueObservable(e){this.currentSinceValue$=this.store.pipe((0,c.Ys)((o=>(0,c.P1)(m,r=>r.groupConversationItems&&r.groupConversationItems[o]?r.groupConversationItems[o].since:null))(e)),(0,y.x)()),this.currentSinceValue$.pipe((0,f.R)(this.ngUnsubscribe),(0,K.b)(this.debounceDelay)).subscribe(n=>{this.since=n,n?(this.initGroupConverstionDispatch(e,n),this.initGroupConverstionItemsObservable(e)):(this.initGroupConverstionDispatch(e),this.initGroupConverstionItemsObservable(e)),this.scrollToBottom()})}scrollToBottom(){this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)}onUpdateGroupMessages(){this.currentGroupID&&this.store.dispatch((0,g.Hn)(this.since?{groupID:this.currentGroupID,since:this.since}:{groupID:this.currentGroupID}))}initIsGroupMessagesLoadingObservable(){this.isgroupMessageLoading$=this.store.pipe((0,c.Ys)(X)),this.isgroupMessageLoading$.pipe((0,f.R)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToBottom()})}initCountdownSubscription(e){e&&(this.countdownSubscription$=this.timerService.getTimer(e))}onSendConversationMessage(){if(!this.groupConversationForm?.invalid&&this.groupConversationForm?.valid&&this.currentGroupID){const e={groupID:this.currentGroupID,message:this.groupConversationForm.value.message,since:Date.now()};this.store.dispatch((0,g.JU)(e)),this.groupConversationForm.reset()}}openDeleteModal(){this.showDeleteModal=!0}cancelGroupDelete(){this.showDeleteModal=!1}confirmDelete(){const e=this.currentGroupID;e&&this.store.dispatch((0,u.iE)({groupId:e}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.gz),t.Y36(c.yh),t.Y36(d.f),t.Y36(l.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-detail"]],viewQuery:function(n,i){if(1&n&&t.Gf(W,5),2&n){let a;t.iGM(a=t.CRH())&&(i.scrollContainer=a.first)}},decls:24,vars:17,consts:[[1,"conversation"],[1,"conversation__notfound"],[1,"conversation__notfound__link",3,"routerLink"],[1,"conversation__header"],[1,"conversation__header__title"],[1,"conversation__header__buttons"],[1,"conversation__header__buttons__refresh"],[4,"ngIf"],[1,"conversation__header__buttons__refresh__button",3,"disabled","click"],[1,"conversation__wrapper"],["class","conversation__list",4,"ngIf","ngIfElse"],["class","conversation__form",3,"formGroup",4,"ngIf"],["loading",""],["type","button",1,"delete__button",3,"buttonText","click"],[1,"conversation__list"],[1,"conversation__list__items"],["scrollContainer",""],["class","conversation__list__item",4,"ngFor","ngForOf"],[1,"conversation__list__item"],[1,"conversation__list__item__date"],[1,"conversation__list__item__profile"],[1,"conversation__list__item__profile__icon"],[1,"conversation__list__item__profile__info"],[1,"conversation__list__item__profile__info__nameDate"],[1,"conversation__list__item__profile__info-name"],[1,"conversation__list__item__profile__info-date"],[1,"conversation__list__item__profile__info-message"],[1,"conversation__form",3,"formGroup"],[1,"conversation__form__control",3,"ngClass"],["id","message","type","text","formControlName","message","autocomplete","message",1,"conversation__form__control__input"],["class","validation",4,"ngIf"],[1,"conversation__form__button-submit"],["type","submit",3,"disabled","buttonText","click"],[1,"validation"],[1,"conversation__modal"],[1,"conversation__modal__title"],[1,"conversation__modal__buttons"],[3,"disabled","buttonText","click"],[3,"buttonText","click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"p",1)(2,"a",2),t._uU(3,"Go to Home Page "),t.qZA()(),t.TgZ(4,"div",3)(5,"h2",4),t._uU(6,"Group dialog"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6),t.YNc(9,tt,3,3,"div",7),t.ALo(10,"async"),t.TgZ(11,"button",8),t.NdJ("click",function(){return i.onUpdateGroupMessages()}),t.ALo(12,"async"),t.ALo(13,"async"),t.TgZ(14,"mat-icon"),t._uU(15,"refresh"),t.qZA()()()()(),t.TgZ(16,"div",9),t.YNc(17,ot,4,1,"div",10),t.ALo(18,"async"),t.YNc(19,st,7,9,"form",11),t.qZA(),t.YNc(20,at,2,0,"ng-template",null,12,t.W1O),t.qZA(),t.TgZ(22,"app-cyber-button",13),t.NdJ("click",function(){return i.openDeleteModal()}),t.qZA(),t.YNc(23,lt,8,5,"div",7)),2&n){const a=t.MAs(21);t.xp6(2),t.Q6J("routerLink",t.DdM(16,ct)),t.xp6(7),t.Q6J("ngIf",t.lcZ(10,8,i.countdownSubscription$)),t.xp6(2),t.Q6J("disabled",t.lcZ(12,10,i.isgroupMessageLoading$)||t.lcZ(13,12,i.countdownSubscription$)),t.xp6(6),t.Q6J("ngIf",t.lcZ(18,14,i.items$))("ngIfElse",a),t.xp6(2),t.Q6J("ngIf",i.groupConversationForm),t.xp6(3),t.Q6J("buttonText","Delete"),t.xp6(1),t.Q6J("ngIf",i.showDeleteModal)}},dependencies:[p.mk,p.sg,p.O5,x.w,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,h.Hw,_.rH,p.Ov,p.uU],styles:['.delete__button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}.conversation[_ngcontent-%COMP%]{padding:0 1rem;height:100%}.conversation__wrapper[_ngcontent-%COMP%]{height:calc(100% - 5rem);display:flex;justify-content:space-between;flex-direction:column;gap:1rem}.conversation__notfound[_ngcontent-%COMP%]{margin-bottom:1rem}.conversation__notfound__link[_ngcontent-%COMP%]{position:relative;display:block;margin:0 auto;text-align:center;max-width:200px;max-height:71px;color:var(--color-beige);background-color:var(--color-alert);padding:.2rem;font-weight:700;box-shadow:0 1px 1px 1px #00000080;text-decoration:none}.conversation__notfound__link[_ngcontent-%COMP%]:after{content:"";position:absolute;background-color:var(--color-alert);height:1px;width:1600px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.conversation__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.conversation__header__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.conversation__header__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.conversation__header__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.conversation__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;max-height:660px;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth}.conversation__list__item__date[_ngcontent-%COMP%]{position:relative;text-align:center;max-width:max-content;margin:0 auto;color:var(--color-beige);background-color:var(--color-alert);padding:.2rem;font-size:16px}.conversation__list__item__date[_ngcontent-%COMP%]:after{content:"";position:absolute;background-color:var(--color-alert);height:1px;width:1600px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.conversation__list__item__profile[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:.4rem}.conversation__list__item__profile__icon[_ngcontent-%COMP%]{align-self:start}.conversation__list__item__profile__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%}.conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:max-content;padding:.4rem .4rem .4rem 1rem;gap:.5rem;background-color:var(--color-high);border-left:12px solid var(--color-alert-trans);font-size:16px;box-shadow:1px 1px 0 1px var(--color-alert-trans)}.conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:5px;width:4px;height:100%;background-color:var(--color-alert-trans)}.conversation__list__item__profile__info-message[_ngcontent-%COMP%]{max-width:1300px;font-size:18px;overflow-wrap:break-word;padding:.3rem}.conversation__list__item[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_elementChanged 1s ease}@keyframes _ngcontent-%COMP%_elementChanged{0%{opacity:0}to{opacity:1}}','.conversation__form[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.conversation__form__control[_ngcontent-%COMP%]{color:var(--color-low);width:100%;position:relative;border-left:15px solid var(--color-alert-trans);box-shadow:1px 1px 0 1px var(--color-alert-trans)}.conversation__form__control[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:10px;width:5px;height:100%;background-color:var(--color-alert-trans)}.conversation__form__control__input[_ngcontent-%COMP%]{width:100%;border-color:transparent;background-color:var(--color-high);outline:none;padding:.8rem .8rem .8rem 2rem}.validation[_ngcontent-%COMP%]{color:var(--danger-color);position:absolute;bottom:-1.2rem;left:0}.invalid[_ngcontent-%COMP%]{color:var(--danger-color);border-left:15px solid var(--danger-color);box-shadow:1px 1px 0 1px var(--danger-color)}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--danger-color);outline-color:var(--danger-color)}.invalid[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:10px;width:5px;height:100%;background-color:var(--danger-color)}',".conversation__modal[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--color-high-trans);border-radius:10px;min-height:300px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.conversation__modal__title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;padding-right:6rem}.conversation__modal__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}"]})}return o})()},{path:"conversation/:conversationId",component:(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-conversation-detail"]],decls:2,vars:0,template:function(n,i){1&n&&(t.TgZ(0,"p"),t._uU(1,"conversation-detail works!"),t.qZA())}})}return o})()}];let _t=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[_.Bz.forChild(pt),_.Bz]})}return o})();var ut=s(153);let gt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.ez,ut.m,_t]})}return o})()}}]);