"use strict";(self.webpackChunkangular_messenger=self.webpackChunkangular_messenger||[]).push([[246],{1246:(Yt,w,a)=>{a.r(w),a.d(w,{YoRHaModule:()=>Ut});var _=a(6814),p=a(4087),t=a(5879),c=a(6223),G=a(2181),l=a(676),y=a(8212),m=a(3938),h=a(2601),Z=a(7843),O=a(7466),f=a(7818);function L(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription)," seconds ")}}function S(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw(2);return t.KtG(s.openDeleteModal(i.id.S))}),t.ALo(1,"async"),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()}if(2&o){const e=t.oxw(3);t.Q6J("disabled",e.isCreateMode||t.lcZ(1,1,e.isGroupLoading$)||!1)}}function A(o,r){if(1&o&&(t.TgZ(0,"li",12)(1,"a",13),t._uU(2),t.qZA(),t.YNc(3,S,4,3,"button",14),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("routerLink","/group/"+e.id.S),t.xp6(1),t.Oqu(e.name.S),t.xp6(1),t.Q6J("ngIf",e.createdBy.S===n.currentLocalStorageUID.uid)}}function J(o,r){if(1&o&&(t.TgZ(0,"div",9)(1,"ul",10),t.YNc(2,A,4,3,"li",11),t.qZA()()),2&o){const e=r.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function U(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",16)(2,"h2",17),t._uU(3," Are you sure you want to delete this group? "),t.qZA(),t.TgZ(4,"div",18)(5,"app-cyber-button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete())}),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"app-cyber-button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelGroupDelete())}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("disabled",t.lcZ(6,3,e.isGroupLoading$)||!1)("buttonText","Delete"),t.xp6(2),t.Q6J("buttonText","Cancel")}}function F(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," Please enter a name "),t.qZA())}function Y(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," The name exceeds 30 characters "),t.qZA())}function N(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," The name must contain only letters, numbers, or spaces "),t.qZA())}function q(o,r){if(1&o&&(t.TgZ(0,"div",29),t.YNc(1,F,2,0,"small",5),t.YNc(2,Y,2,0,"small",5),t.YNc(3,N,2,0,"small",5),t.qZA()),2&o){const e=t.oxw(3);t.xp6(1),t.Q6J("ngIf",e.getError("name","required")),t.xp6(1),t.Q6J("ngIf",e.getError("name","maxlength")),t.xp6(1),t.Q6J("ngIf",e.getError("name","pattern"))}}const Q=function(o){return{invalid:o}};function $(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",22)(1,"h2",23),t._uU(2,"Create group"),t.qZA(),t.TgZ(3,"div",24)(4,"label",25),t._uU(5,"group name"),t.qZA(),t._UZ(6,"input",26),t.YNc(7,q,4,3,"div",27),t.qZA(),t.TgZ(8,"div",28)(9,"app-cyber-button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onCreateGroupSubmit())}),t.ALo(10,"async"),t.qZA(),t.TgZ(11,"app-cyber-button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.onCancelCreate())}),t.qZA()()()}if(2&o){const e=t.oxw(2);t.Q6J("formGroup",e.groupForm),t.xp6(3),t.Q6J("ngClass",t.VKq(8,Q,(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid))),t.xp6(4),t.Q6J("ngIf",(null==e.name?null:e.name.touched)&&(null==e.name?null:e.name.invalid)),t.xp6(2),t.Q6J("disabled",e.groupForm.invalid||t.lcZ(10,6,e.isGroupLoading$)||!1)("buttonText","Create"),t.xp6(2),t.Q6J("buttonText","Cancel")}}function j(o,r){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,$,12,10,"form",21),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.groupForm)}}function E(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}let H=(()=>{class o{constructor(e,n,i,s){this.store=e,this.fb=n,this.timerService=i,this.groupStorageService=s,this.showDeleteModal=!1,this.isCreateMode=!1,this.countdownKey="groupTimer",this.currentGroupId=null}ngOnInit(){this.initGroupListDispatch(),this.getLocalStorageUid(),this.initForm(),this.initGroupItemsObservable(),this.initIsGroupLoadingObservable(),this.initCountdownSubscription()}initGroupItemsObservable(){this.groupItems$=this.store.pipe((0,l.Ys)(y.F$)),this.createGroupSubscription=this.groupItems$.pipe((0,G.h)(e=>null!==e)).subscribe(e=>{this.onCancelCreate(),this.cancelGroupDelete(),e&&this.initMyGroups(e)})}initMyGroups(e){const n=this.currentLocalStorageUID.uid,i=e.filter(s=>s.createdBy.S===n);if(i)for(let s=0;s<i.length;s+=1)this.groupStorageService.addMyGroupToStorage(i[s].id.S)}initIsGroupLoadingObservable(){this.isGroupLoading$=this.store.pipe((0,l.Ys)(y.mH))}initCountdownSubscription(){this.countdownSubscription=this.timerService.getTimer(this.countdownKey)}initGroupListDispatch(){this.store.dispatch((0,m.PT)())}onRefreshClick(){this.store.dispatch((0,m.HJ)())}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorageUID=JSON.parse(e))}initForm(){this.groupForm=this.fb.group({name:["",[c.kI.required,c.kI.maxLength(30),c.kI.pattern(/^[a-zA-Z0-9 ]*$/)]]})}get name(){return this.groupForm?.get("name")}getError(e,n){return this.groupForm?.get(e)?.hasError(n)}onCreateClick(){this.isCreateMode=!0}onCreateGroupSubmit(){if(this.groupForm?.valid){const n={name:this.groupForm.value.name,createdAt:Date.now().toString(),createdBy:this.currentLocalStorageUID.uid};this.store.dispatch((0,m.sS)(n))}}onCancelCreate(){this.groupForm?.reset(),this.isCreateMode=!1}openDeleteModal(e){e&&(this.currentGroupId=e),this.showDeleteModal=!0}cancelGroupDelete(){this.currentGroupId=null,this.showDeleteModal=!1}confirmDelete(){const e=this.currentGroupId;e&&this.store.dispatch((0,m.iE)({groupID:e}))}ngOnDestroy(){this.createGroupSubscription?.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.yh),t.Y36(c.qu),t.Y36(h.f),t.Y36(Z.z))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-grouplist"]],decls:21,vars:18,consts:[[1,"group"],[1,"group__buttons"],[1,"group__buttons__create"],[3,"buttonText","disabled","click"],[1,"group__buttons__refresh"],[4,"ngIf"],[1,"group__buttons__refresh__button",3,"disabled","click"],["class","group__list",4,"ngIf","ngIfElse"],["loading",""],[1,"group__list"],[1,"group__list__items"],["class","group__list__item",4,"ngFor","ngForOf"],[1,"group__list__item"],[1,"group__list__item__link",3,"routerLink"],["type","button","class","group__list__item__delete",3,"disabled","click",4,"ngIf"],["type","button",1,"group__list__item__delete",3,"disabled","click"],[1,"group__modal"],[1,"group__modal__title"],[1,"group__modal__buttons"],[3,"disabled","buttonText","click"],[3,"buttonText","click"],["class","group__form",3,"formGroup",4,"ngIf"],[1,"group__form",3,"formGroup"],[1,"group__form__title"],[1,"group__form__control",3,"ngClass"],["for","name"],["id","name","type","text","formControlName","name","autocomplete","name"],["class","validation",4,"ngIf"],[1,"group__form__buttons"],[1,"validation"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Groups"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2)(5,"app-cyber-button",3),t.NdJ("click",function(){return i.onCreateClick()}),t.ALo(6,"async"),t.qZA()(),t.TgZ(7,"div",4),t.YNc(8,L,3,3,"div",5),t.ALo(9,"async"),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.onRefreshClick()}),t.ALo(11,"async"),t.ALo(12,"async"),t.TgZ(13,"mat-icon"),t._uU(14,"refresh"),t.qZA()()()(),t.YNc(15,J,3,1,"div",7),t.ALo(16,"async"),t.YNc(17,U,8,5,"div",5),t.YNc(18,j,2,1,"div",5),t.YNc(19,E,2,0,"ng-template",null,8,t.W1O),t.qZA()),2&n){const s=t.MAs(20);t.xp6(5),t.Q6J("buttonText","Create")("disabled",i.showDeleteModal||t.lcZ(6,8,i.isGroupLoading$)||!1),t.xp6(3),t.Q6J("ngIf",t.lcZ(9,10,i.countdownSubscription)),t.xp6(2),t.Q6J("disabled",t.lcZ(11,12,i.countdownSubscription)||t.lcZ(12,14,i.isGroupLoading$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(16,16,i.groupItems$))("ngIfElse",s),t.xp6(2),t.Q6J("ngIf",i.showDeleteModal),t.xp6(1),t.Q6J("ngIf",i.isCreateMode)}},dependencies:[_.mk,_.sg,_.O5,O.w,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.Hw,p.rH,_.Ov],styles:['[_nghost-%COMP%]{max-width:800px;padding:1rem 2rem 1rem 1rem;width:100%}.group[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.group__buttons[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-between;align-items:center}.group__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.group__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.group__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.group__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem;padding-right:.1rem;max-height:670px;overflow-y:auto;overflow-x:hidden}.group__list__item[_ngcontent-%COMP%]{position:relative;height:2rem;line-height:2rem;padding-left:2rem;width:96%;background-color:var(--color-mid);transition:all .3s ease}.group__list__item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-alert-trans)}.group__list__item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-alert-trans)}.group__list__item[_ngcontent-%COMP%]:hover{background-color:var(--color-alert-trans)}.group__list__item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:var(--color-high)}.group__list__item[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-high)}.group__list__item[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-high)}.group__list__item__delete[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;position:absolute;background-color:transparent;border:none;right:-1.6rem;top:50%;transform:translateY(-50%);cursor:var(--cursor-pointer)}.group__list__item__delete[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.group__list__item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;color:var(--color-alert-trans);font-weight:600;text-decoration:none}',".group__form[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--background-auth);border-radius:10px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.group__form__title[_ngcontent-%COMP%]{margin-bottom:1rem}.group__form__control[_ngcontent-%COMP%]{color:var(--color-low)}.group__form__control[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:3rem;border-color:transparent;background-color:var(--background);outline-color:var(--primary);margin-top:1rem;padding:1rem}.group__form__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}.validation[_ngcontent-%COMP%], .invalid[_ngcontent-%COMP%]{color:var(--danger-color)}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--danger-color);outline-color:var(--danger-color)}",".group__modal[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--color-high-trans);border-radius:10px;min-height:300px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.group__modal__title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;padding-right:6rem}.group__modal__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}"]})}return o})();const z=function(){return["/profile"]};let K=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-profile-link"]],decls:3,vars:2,consts:[[1,"profile"],[1,"profile__link",3,"routerLink"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"a",1),t._uU(2,"Profile"),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("routerLink",t.DdM(1,z)))},dependencies:[p.rH],styles:[".profile[_ngcontent-%COMP%]{position:absolute;bottom:16.2rem;left:-12.5rem;transform:rotate(-90deg);background-color:var(--color-alert-trans);transition:all .3s ease;box-shadow:5px 5px 1px 2px var(--font-dark)}.profile__link[_ngcontent-%COMP%]{display:inline-block;font-size:4.9rem;text-decoration:none;color:var(--color-high-trans);letter-spacing:2.4rem;font-weight:700}.profile__link[_ngcontent-%COMP%]:hover{color:var(--color-high)}.profile[_ngcontent-%COMP%]:hover{background-color:var(--font-dark);box-shadow:5px 5px 1px 2px var(--color-alert)}"]})}return o})();var P=a(8645),g=a(9773),v=a(3620),V=a(8180),T=a(3989),D=a(6331),u=a(3405),b=a(2083);let R=(()=>{class o{transform(e,n){return!!n.find(s=>s.companionID.S===e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.Yjl({name:"existConversationClass",type:o,pure:!0})}return o})();function B(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription$)," seconds ")}}const X=function(o){return{exist:o}};function W(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li",10),t.ALo(1,"existConversationClass"),t.TgZ(2,"button",11),t.NdJ("click",function(){const s=t.CHM(e).$implicit,d=t.oxw(2);return t.KtG(d.onStartConversationWithUser(s.uid.S))}),t.ALo(3,"async"),t._uU(4),t.qZA()()}if(2&o){const e=r.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(8,X,t.xi3(1,3,e.uid.S,n.existingConversationList))),t.xp6(2),t.Q6J("disabled",t.lcZ(3,6,n.isPeopleListLoading$)),t.xp6(2),t.hij(" ",e.name.S," ")}}function tt(o,r){if(1&o&&(t.TgZ(0,"div",7)(1,"ul",8),t.YNc(2,W,5,10,"li",9),t.qZA()()),2&o){const e=r.ngIf;t.xp6(2),t.Q6J("ngForOf",e)}}function et(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}let ot=(()=>{class o{constructor(e,n,i){this.store=e,this.timerService=n,this.router=i,this.countdownKey="peopleTimer",this.ngUnsubscribe=new P.x,this.existingConversationList=[],this.debounceDelay=1e3}ngOnInit(){this.getLocalStorageUid(),this.initPeopleListDispatch(),this.initPeopleItemsObservable(),this.initIsPeopleListLoadingObservable(),this.initCountdownSubscription(),this.initExistingConversation()}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorage=JSON.parse(e))}initPeopleListDispatch(){this.store.dispatch((0,T.I$)(this.currentLocalStorage))}initPeopleItemsObservable(){this.peopleItems$=this.store.pipe((0,l.Ys)(D.P7)),this.peopleItems$.pipe((0,g.R)(this.ngUnsubscribe),(0,v.b)(this.debounceDelay)).subscribe(e=>{e&&this.store.dispatch((0,u.op)())})}initExistingConversation(){this.existingConversation$=this.store.pipe((0,l.Ys)(b.Pu)),this.existingConversation$.pipe((0,g.R)(this.ngUnsubscribe)).subscribe(e=>{e&&e.length>0&&(this.existingConversationList=e)})}onUpdatePeopleList(){this.store.dispatch((0,T.ND)(this.currentLocalStorage)),this.store.pipe((0,v.b)(this.debounceDelay),(0,V.q)(1)).subscribe(()=>{this.store.dispatch((0,u.Z8)())})}initIsPeopleListLoadingObservable(){this.isPeopleListLoading$=this.store.pipe((0,l.Ys)(D.I$))}initCountdownSubscription(){this.countdownSubscription$=this.timerService.getTimer(this.countdownKey)}onStartConversationWithUser(e){if(this.existingConversationList&&this.existingConversationList.length>0){const n=this.existingConversationList.find(i=>i.companionID.S===e)||null;n?this.router.navigate(["conversation",n.id.S]):this.store.dispatch((0,u.Xw)({companion:e}))}else this.store.dispatch((0,u.Xw)({companion:e}))}changeColorExistingConversation(e){return this.existingConversationList&&this.existingConversationList.length>0&&this.existingConversationList?.find(i=>i.companionID.S===e)?e:null}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(l.yh),t.Y36(h.f),t.Y36(p.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-people-list"]],decls:16,vars:12,consts:[[1,"people"],[1,"people__buttons"],[1,"people__buttons__refresh"],[4,"ngIf"],[1,"people__buttons__refresh__button",3,"disabled","click"],["class","people__list",4,"ngIf","ngIfElse"],["loading",""],[1,"people__list"],[1,"people__list__items"],["class","people__list__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"people__list__item",3,"ngClass"],[1,"people__list__item__button",3,"disabled","click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"People"),t.qZA(),t.TgZ(3,"div",1)(4,"div",2),t.YNc(5,B,3,3,"div",3),t.ALo(6,"async"),t.TgZ(7,"button",4),t.NdJ("click",function(){return i.onUpdatePeopleList()}),t.ALo(8,"async"),t.ALo(9,"async"),t.TgZ(10,"mat-icon"),t._uU(11,"refresh"),t.qZA()()()(),t.YNc(12,tt,3,1,"div",5),t.ALo(13,"async"),t.YNc(14,et,2,0,"ng-template",null,6,t.W1O),t.qZA()),2&n){const s=t.MAs(15);t.xp6(5),t.Q6J("ngIf",t.lcZ(6,4,i.countdownSubscription$)),t.xp6(2),t.Q6J("disabled",t.lcZ(8,6,i.isPeopleListLoading$)||t.lcZ(9,8,i.countdownSubscription$)),t.xp6(5),t.Q6J("ngIf",t.lcZ(13,10,i.peopleItems$))("ngIfElse",s)}},dependencies:[_.mk,_.sg,_.O5,f.Hw,_.Ov,R],styles:['[_nghost-%COMP%]{max-width:800px;padding:1rem 1rem 1rem 2rem;width:100%}.people[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.people__buttons[_ngcontent-%COMP%]{width:100%;display:flex;min-height:55px;justify-content:space-between;align-items:center;flex-direction:row-reverse}.people__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.people__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.people__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.people__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem;padding-right:.1rem;max-height:670px;overflow-y:auto;overflow-x:hidden}.people__list__item[_ngcontent-%COMP%]{position:relative;height:2rem;line-height:2rem;padding-left:2rem;background-color:var(--color-mid);transition:all .3s ease}.people__list__item[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-alert-trans)}.people__list__item[_ngcontent-%COMP%]:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-alert-trans)}.people__list__item[_ngcontent-%COMP%]:hover{background-color:var(--color-alert-trans)}.people__list__item[_ngcontent-%COMP%]:hover   a[_ngcontent-%COMP%]{color:var(--color-high)}.people__list__item[_ngcontent-%COMP%]:hover:before{content:"";position:absolute;top:0;left:0;width:10px;height:100%;background-color:var(--color-high)}.people__list__item[_ngcontent-%COMP%]:hover:after{content:"";position:absolute;top:0;left:15px;width:3px;height:100%;background-color:var(--color-high)}.people__list__item__button[_ngcontent-%COMP%]{color:var(--color-alert-trans);font-weight:600;background-color:transparent;border:none;width:100%;height:100%;text-align:left;cursor:var(--cursor-pointer)}.exist[_ngcontent-%COMP%]{background-color:var(--color-alert)}.exist[_ngcontent-%COMP%]:hover{background-color:var(--color-alert-hover)}']})}return o})(),nt=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-home-page"]],decls:3,vars:0,template:function(n,i){1&n&&t._UZ(0,"app-grouplist")(1,"app-people-list")(2,"app-profile-link")},dependencies:[H,K,ot],styles:['[_nghost-%COMP%]{display:flex;justify-content:space-between}[_nghost-%COMP%]:before{content:"";position:absolute;top:2rem;left:50%;transform:translate(-50%);height:calc(100% - 4rem);width:1px;background-color:var(--color-alert)}']})}return o})();var x=a(3997),C=a(8041),it=a(2599);const M=(0,l.ZF)(it.Ff),at=((0,l.P1)(M,o=>o.groupConversationItems),(0,l.P1)(M,o=>o.loading));var k=a(936);let I=(()=>{class o{transform(e,n){const i=n.find(s=>s.uid.S===e);return i?i.name.S:"unknown"}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.Yjl({name:"peopleName",type:o,pure:!0})}return o})();const ct=["scrollContainer"];function lt(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription$)," seconds ")}}const _t=function(o){return{myMessage:o}};function pt(o,r){if(1&o&&(t.TgZ(0,"li",18)(1,"div",19)(2,"p",20),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div",21)(6,"div",22),t._uU(7," Icon "),t.qZA(),t.TgZ(8,"div",23)(9,"div",24)(10,"span",25),t._uU(11),t.ALo(12,"peopleName"),t.qZA(),t.TgZ(13,"span",26),t._uU(14),t.ALo(15,"date"),t.qZA()(),t.TgZ(16,"p",27),t._uU(17),t.qZA()()()()()),2&o){const e=r.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(14,_t,n.currentLocalStorage.uid===e.authorID.S)),t.xp6(3),t.hij(" ",t.xi3(4,5,e.createdAt.S,"longDate")," "),t.xp6(8),t.hij(" ",t.xi3(12,8,e.authorID.S,n.peopleList),""),t.xp6(3),t.Oqu(t.xi3(15,11,e.createdAt.S,"shortDate")),t.xp6(3),t.hij(" ",e.message.S," ")}}function ut(o,r){if(1&o&&(t.TgZ(0,"div",14)(1,"ul",15,16),t.YNc(3,pt,18,16,"li",17),t.qZA()()),2&o){const e=r.ngIf;t.xp6(3),t.Q6J("ngForOf",e)}}function gt(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," Please enter a message "),t.qZA())}function mt(o,r){if(1&o&&(t.TgZ(0,"div",34),t.YNc(1,gt,2,0,"small",7),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getError("message","required"))}}const dt=function(o){return{invalid:o}};function ht(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",28)(1,"div",29),t._UZ(2,"input",30),t.YNc(3,mt,2,1,"div",31),t.qZA(),t.TgZ(4,"div",32)(5,"app-cyber-button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSendConversationMessage())}),t.ALo(6,"async"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.conversationForm),t.xp6(1),t.Q6J("ngClass",t.VKq(7,dt,(null==e.message?null:e.message.touched)&&(null==e.message?null:e.message.invalid))),t.xp6(2),t.Q6J("ngIf",(null==e.message?null:e.message.touched)&&(null==e.message?null:e.message.invalid)),t.xp6(2),t.Q6J("disabled",e.conversationForm.invalid||t.lcZ(6,5,e.isGroupMessageLoading$)||!1)("buttonText","Send")}}function ft(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}function vt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-cyber-button",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openDeleteModal())}),t.qZA()}2&o&&t.Q6J("buttonText","Delete")}function bt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",36)(2,"h2",37),t._uU(3," Are you sure you want to delete this group? "),t.qZA(),t.TgZ(4,"div",38)(5,"app-cyber-button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete())}),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"app-cyber-button",40),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelDelete())}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("disabled",t.lcZ(6,3,e.isGroupBeingDeleted$)||!1)("buttonText","Delete"),t.xp6(2),t.Q6J("buttonText","Cancel")}}const xt=function(){return["/"]},Mt=["scrollContainer"];function yt(o,r){if(1&o&&(t.TgZ(0,"div"),t._uU(1),t.ALo(2,"async"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.hij(" Next update in ",t.lcZ(2,1,e.countdownSubscription$)," seconds ")}}const Ot=function(o){return{myMessage:o}};function Pt(o,r){if(1&o&&(t.TgZ(0,"li",18)(1,"div",19)(2,"p",20),t._uU(3),t.ALo(4,"date"),t.qZA(),t.TgZ(5,"div",21)(6,"div",22),t._uU(7," Icon "),t.qZA(),t.TgZ(8,"div",23)(9,"div",24)(10,"span",25),t._uU(11),t.ALo(12,"peopleName"),t.qZA(),t.TgZ(13,"span",26),t._uU(14),t.ALo(15,"date"),t.qZA()(),t.TgZ(16,"p",27),t._uU(17),t.qZA()()()()()),2&o){const e=r.$implicit,n=t.oxw(2);t.Q6J("ngClass",t.VKq(14,Ot,n.currentLocalStorage.uid===e.authorID.S)),t.xp6(3),t.hij(" ",t.xi3(4,5,e.createdAt.S,"longDate")," "),t.xp6(8),t.hij(" ",t.xi3(12,8,e.authorID.S,n.peopleList),""),t.xp6(3),t.Oqu(t.xi3(15,11,e.createdAt.S,"shortDate")),t.xp6(3),t.hij(" ",e.message.S," ")}}function wt(o,r){if(1&o&&(t.TgZ(0,"div",14)(1,"ul",15,16),t.YNc(3,Pt,18,16,"li",17),t.qZA()()),2&o){const e=r.ngIf;t.xp6(3),t.Q6J("ngForOf",e)}}function Zt(o,r){1&o&&(t.TgZ(0,"small"),t._uU(1," Please enter a message "),t.qZA())}function Tt(o,r){if(1&o&&(t.TgZ(0,"div",34),t.YNc(1,Zt,2,0,"small",7),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.getError("message","required"))}}const Dt=function(o){return{invalid:o}};function kt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",28)(1,"div",29),t._UZ(2,"input",30),t.YNc(3,Tt,2,1,"div",31),t.qZA(),t.TgZ(4,"div",32)(5,"app-cyber-button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSendConversationMessage())}),t.ALo(6,"async"),t.qZA()()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.conversationForm),t.xp6(1),t.Q6J("ngClass",t.VKq(7,Dt,(null==e.message?null:e.message.touched)&&(null==e.message?null:e.message.invalid))),t.xp6(2),t.Q6J("ngIf",(null==e.message?null:e.message.touched)&&(null==e.message?null:e.message.invalid)),t.xp6(2),t.Q6J("disabled",e.conversationForm.invalid||t.lcZ(6,5,e.isLoading$)||!1)("buttonText","Send")}}function It(o,r){1&o&&(t.TgZ(0,"p"),t._uU(1,"Loading..."),t.qZA())}function Gt(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div")(1,"div",35)(2,"h2",36),t._uU(3," Are you sure you want to delete this group? "),t.qZA(),t.TgZ(4,"div",37)(5,"app-cyber-button",38),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.confirmDelete())}),t.ALo(6,"async"),t.qZA(),t.TgZ(7,"app-cyber-button",39),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.cancelDelete())}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(5),t.Q6J("disabled",t.lcZ(6,3,e.isLoading$)||!1)("buttonText","Delete"),t.xp6(2),t.Q6J("buttonText","Cancel")}}const Lt=function(){return["/"]},St=[{path:"",component:nt},{path:"group/:groupID",component:(()=>{class o{constructor(e,n,i,s,d,Ft){this.route=e,this.store=n,this.peopleLocalStorageService=i,this.timerService=s,this.fb=d,this.groupStorageService=Ft,this.peopleList=this.peopleLocalStorageService.getPeopleStorage(),this.since=null,this.currentGroupID=null,this.ngUnsubscribe=new P.x,this.debounceDelay=1e3,this.showDeleteModal=!1,this.isMyGroup=!1}ngOnInit(){this.initForm(),this.getLocalStorageUid(),this.initIsGroupMessagesLoadingObservable(),this.initGroupDeleteLoading(),this.route.paramMap.pipe((0,g.R)(this.ngUnsubscribe)).subscribe(e=>{if(e){const n=e.get("groupID");this.currentGroupID=n,n&&this.getMyGroups(n)}}),this.currentGroupID&&(this.initSinceValueObservable(this.currentGroupID),this.initCountdownSubscription(this.currentGroupID))}initForm(){this.conversationForm=this.fb.group({message:["",[c.kI.required]]})}get message(){return this.conversationForm?.get("message")}getError(e,n){return this.conversationForm?.get(e)?.hasError(n)}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorage=JSON.parse(e))}getMyGroups(e){const n=this.groupStorageService.getGroups();this.isMyGroup=n.includes(e)}initGroupConverstionDispatch(e,n){this.store.dispatch((0,C.p1)({groupID:e,since:n}))}initGroupConverstionItemsObservable(e){this.items$=this.store.pipe((0,l.Ys)((o=>(0,l.P1)(M,r=>r.groupConversationItems&&r.groupConversationItems[o]?r.groupConversationItems[o].groupConversationItem:null))(e)),(0,x.x)())}initSinceValueObservable(e){this.currentSinceValue$=this.store.pipe((0,l.Ys)((o=>(0,l.P1)(M,r=>r.groupConversationItems&&r.groupConversationItems[o]?r.groupConversationItems[o].since:null))(e)),(0,x.x)()),this.currentSinceValue$.pipe((0,g.R)(this.ngUnsubscribe),(0,v.b)(this.debounceDelay)).subscribe(n=>{this.since=n,n?(this.initGroupConverstionDispatch(e,n),this.initGroupConverstionItemsObservable(e)):(this.initGroupConverstionDispatch(e),this.initGroupConverstionItemsObservable(e)),this.scrollToBottom()})}scrollToBottom(){this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)}onUpdateGroupMessages(){this.currentGroupID&&this.store.dispatch((0,C.Hn)(this.since?{groupID:this.currentGroupID,since:this.since}:{groupID:this.currentGroupID}))}initIsGroupMessagesLoadingObservable(){this.isGroupMessageLoading$=this.store.pipe((0,l.Ys)(at)),this.isGroupMessageLoading$.pipe((0,g.R)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToBottom()})}initGroupDeleteLoading(){this.isGroupBeingDeleted$=this.store.pipe((0,l.Ys)(y.mH))}initCountdownSubscription(e){e&&(this.countdownSubscription$=this.timerService.getTimer(e))}onSendConversationMessage(){this.conversationForm?.invalid||this.conversationForm?.valid&&this.currentGroupID&&(this.store.dispatch((0,C.JU)({groupID:this.currentGroupID,message:this.conversationForm.value.message,since:this.since?+this.since+1:1702312323642})),this.conversationForm.reset())}openDeleteModal(){this.showDeleteModal=!0}cancelDelete(){this.showDeleteModal=!1}confirmDelete(){const e=this.currentGroupID;e&&this.store.dispatch((0,m.iE)({groupID:e}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(p.gz),t.Y36(l.yh),t.Y36(k.j),t.Y36(h.f),t.Y36(c.qu),t.Y36(Z.z))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-group-detail"]],viewQuery:function(n,i){if(1&n&&t.Gf(ct,5),2&n){let s;t.iGM(s=t.CRH())&&(i.scrollContainer=s.first)}},decls:24,vars:17,consts:[[1,"conversation"],[1,"conversation__homepage"],[1,"conversation__homepage__link",3,"routerLink"],[1,"conversation__header"],[1,"conversation__header__title"],[1,"conversation__header__buttons"],[1,"conversation__header__buttons__refresh"],[4,"ngIf"],[1,"conversation__header__buttons__refresh__button",3,"disabled","click"],[1,"conversation__wrapper"],["class","conversation__list",4,"ngIf","ngIfElse"],["class","conversation__form",3,"formGroup",4,"ngIf"],["loading",""],["type","button","class","delete__button",3,"buttonText","click",4,"ngIf"],[1,"conversation__list"],[1,"conversation__list__items"],["scrollContainer",""],["class","conversation__list__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"conversation__list__item",3,"ngClass"],[1,"conversation__list__item"],[1,"conversation__list__item__date"],[1,"conversation__list__item__profile"],[1,"conversation__list__item__profile__icon"],[1,"conversation__list__item__profile__info"],[1,"conversation__list__item__profile__info__nameDate"],[1,"conversation__list__item__profile__info-name"],[1,"conversation__list__item__profile__info-date"],[1,"conversation__list__item__profile__info-message"],[1,"conversation__form",3,"formGroup"],[1,"conversation__form__control",3,"ngClass"],["id","message","type","text","formControlName","message","autocomplete","message",1,"conversation__form__control__input"],["class","validation",4,"ngIf"],[1,"conversation__form__button-submit"],["type","submit",3,"disabled","buttonText","click"],[1,"validation"],["type","button",1,"delete__button",3,"buttonText","click"],[1,"conversation__modal"],[1,"conversation__modal__title"],[1,"conversation__modal__buttons"],[3,"disabled","buttonText","click"],[3,"buttonText","click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"p",1)(2,"a",2),t._uU(3,"Go to Home Page "),t.qZA()(),t.TgZ(4,"div",3)(5,"h2",4),t._uU(6,"Group dialog"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6),t.YNc(9,lt,3,3,"div",7),t.ALo(10,"async"),t.TgZ(11,"button",8),t.NdJ("click",function(){return i.onUpdateGroupMessages()}),t.ALo(12,"async"),t.ALo(13,"async"),t.TgZ(14,"mat-icon"),t._uU(15,"refresh"),t.qZA()()()()(),t.TgZ(16,"div",9),t.YNc(17,ut,4,1,"div",10),t.ALo(18,"async"),t.YNc(19,ht,7,9,"form",11),t.qZA(),t.YNc(20,ft,2,0,"ng-template",null,12,t.W1O),t.qZA(),t.YNc(22,vt,1,1,"app-cyber-button",13),t.YNc(23,bt,8,5,"div",7)),2&n){const s=t.MAs(21);t.xp6(2),t.Q6J("routerLink",t.DdM(16,xt)),t.xp6(7),t.Q6J("ngIf",t.lcZ(10,8,i.countdownSubscription$)),t.xp6(2),t.Q6J("disabled",t.lcZ(12,10,i.isGroupMessageLoading$)||t.lcZ(13,12,i.countdownSubscription$)),t.xp6(6),t.Q6J("ngIf",t.lcZ(18,14,i.items$))("ngIfElse",s),t.xp6(2),t.Q6J("ngIf",i.conversationForm),t.xp6(3),t.Q6J("ngIf",i.isMyGroup),t.xp6(1),t.Q6J("ngIf",i.showDeleteModal)}},dependencies:[_.mk,_.sg,_.O5,O.w,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.Hw,p.rH,_.Ov,_.uU,I],styles:['.delete__button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}.conversation[_ngcontent-%COMP%]{padding:0 1rem;height:100%}.conversation__wrapper[_ngcontent-%COMP%]{height:calc(100% - 5rem);display:flex;justify-content:space-between;flex-direction:column;gap:1rem}.conversation__homepage[_ngcontent-%COMP%]{margin-bottom:1rem}.conversation__homepage__link[_ngcontent-%COMP%]{position:relative;display:block;margin:0 auto;text-align:center;max-width:200px;max-height:71px;color:var(--color-beige);background-color:var(--color-alert);padding:.2rem;font-weight:700;box-shadow:0 1px 1px 1px #00000080;text-decoration:none}.conversation__homepage__link[_ngcontent-%COMP%]:after{content:"";position:absolute;background-color:var(--color-alert);height:1px;width:1600px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.conversation__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.conversation__header__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.conversation__header__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.conversation__header__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.conversation__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;max-height:660px;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth}.conversation__list__item__date[_ngcontent-%COMP%]{position:relative;text-align:center;max-width:max-content;margin:0 auto;color:var(--color-beige);background-color:var(--color-alert);padding:.2rem;font-size:16px}.conversation__list__item__date[_ngcontent-%COMP%]:after{content:"";position:absolute;background-color:var(--color-alert);height:1px;width:1600px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.conversation__list__item__profile[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:.4rem}.conversation__list__item__profile__icon[_ngcontent-%COMP%]{align-self:start}.conversation__list__item__profile__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%}.conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:max-content;padding:.4rem .4rem .4rem 1rem;gap:.5rem;background-color:var(--color-high);border-left:12px solid var(--color-alert-trans);font-size:16px;box-shadow:1px 1px 0 1px var(--color-alert-trans)}.conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:5px;width:4px;height:100%;background-color:var(--color-alert-trans)}.conversation__list__item__profile__info-message[_ngcontent-%COMP%]{max-width:70%;font-size:18px;overflow-wrap:break-word;padding:.3rem;text-align:left}.conversation__list__item[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_elementChanged 1s ease}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile[_ngcontent-%COMP%]{flex-direction:row-reverse}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile__info[_ngcontent-%COMP%]{align-items:flex-end}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]{flex-direction:row-reverse}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile__info-message[_ngcontent-%COMP%]{text-align:right}@keyframes _ngcontent-%COMP%_elementChanged{0%{opacity:0}to{opacity:1}}','.conversation__form[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.conversation__form__control[_ngcontent-%COMP%]{color:var(--color-low);width:100%;position:relative;border-left:15px solid var(--color-alert-trans);box-shadow:1px 1px 0 1px var(--color-alert-trans)}.conversation__form__control[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:10px;width:5px;height:100%;background-color:var(--color-alert-trans)}.conversation__form__control__input[_ngcontent-%COMP%]{width:100%;border-color:transparent;background-color:var(--color-high-trans);outline:none;padding:.8rem .8rem .8rem 2rem}.validation[_ngcontent-%COMP%]{color:var(--danger-color);position:absolute;bottom:-1.2rem;left:0}.invalid[_ngcontent-%COMP%]{color:var(--danger-color);border-left:15px solid var(--danger-color);box-shadow:1px 1px 0 1px var(--danger-color)}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--danger-color);outline-color:var(--danger-color)}.invalid[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:10px;width:5px;height:100%;background-color:var(--danger-color)}',".conversation__modal[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--color-high-trans);border-radius:10px;min-height:300px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.conversation__modal__title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;padding-right:6rem}.conversation__modal__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}"]})}return o})()},{path:"conversation/:conversationID",component:(()=>{class o{constructor(e,n,i,s,d){this.route=e,this.store=n,this.peopleLocalStorageService=i,this.timerService=s,this.fb=d,this.currentConversationID=null,this.showDeleteModal=!1,this.since=null,this.debounceDelay=1e3,this.peopleList=this.peopleLocalStorageService.getPeopleStorage(),this.ngUnsubscribe=new P.x}ngOnInit(){this.initForm(),this.initIsConversationLoadingObservable(),this.getLocalStorageUid(),this.route.paramMap.pipe((0,g.R)(this.ngUnsubscribe)).subscribe(e=>{if(e){const n=e.get("conversationID");this.currentConversationID=n}}),this.currentConversationID&&(this.initSinceValueObservable(this.currentConversationID),this.initCountdownSubscription(this.currentConversationID))}initSinceValueObservable(e){this.currentSinceValue$=this.store.pipe((0,l.Ys)((0,b.qd)(e)),(0,x.x)()),this.currentSinceValue$.pipe((0,g.R)(this.ngUnsubscribe),(0,v.b)(this.debounceDelay)).subscribe(n=>{this.since=n,n?this.initConverstionDispatch(e,n):this.initConverstionDispatch(e),this.scrollToBottom()})}initConverstionDispatch(e,n){this.items$=this.store.pipe((0,l.Ys)((0,b.q6)(e)),(0,x.x)()),this.store.dispatch((0,u.FQ)({conversationID:e,since:n}))}initForm(){this.conversationForm=this.fb.group({message:["",[c.kI.required]]})}get message(){return this.conversationForm?.get("message")}getError(e,n){return this.conversationForm?.get(e)?.hasError(n)}initIsConversationLoadingObservable(){this.isLoading$=this.store.pipe((0,l.Ys)(b.Xh)),this.isLoading$.pipe((0,g.R)(this.ngUnsubscribe)).subscribe(()=>{this.scrollToBottom()})}scrollToBottom(){this.scrollContainer&&(this.scrollContainer.nativeElement.scrollTop=this.scrollContainer.nativeElement.scrollHeight)}openDeleteModal(){this.showDeleteModal=!0}cancelDelete(){this.showDeleteModal=!1}confirmDelete(){const e=this.currentConversationID;e&&this.store.dispatch((0,u.SJ)({conversationID:e}))}getLocalStorageUid(){const e=localStorage.getItem("auth");e&&(this.currentLocalStorage=JSON.parse(e))}initCountdownSubscription(e){this.countdownSubscription$=this.timerService.getTimer(e)}onSendConversationMessage(){this.conversationForm?.invalid||this.conversationForm?.valid&&this.currentConversationID&&(this.store.dispatch((0,u.Ug)({conversationID:this.currentConversationID,message:this.conversationForm.value.message,since:this.since?+this.since+1:1702312323642})),this.conversationForm.reset())}onUpdateConversationMessage(){this.currentConversationID&&this.store.dispatch((0,u.Mv)(this.since?{conversationID:this.currentConversationID,since:this.since}:{conversationID:this.currentConversationID}))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(p.gz),t.Y36(l.yh),t.Y36(k.j),t.Y36(h.f),t.Y36(c.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-conversation-detail"]],viewQuery:function(n,i){if(1&n&&t.Gf(Mt,5),2&n){let s;t.iGM(s=t.CRH())&&(i.scrollContainer=s.first)}},decls:24,vars:17,consts:[[1,"conversation"],[1,"conversation__homepage"],[1,"conversation__homepage__link",3,"routerLink"],[1,"conversation__header"],[1,"conversation__header__title"],[1,"conversation__header__buttons"],[1,"conversation__header__buttons__refresh"],[4,"ngIf"],[1,"conversation__header__buttons__refresh__button",3,"disabled","click"],[1,"conversation__wrapper"],["class","conversation__list",4,"ngIf","ngIfElse"],["class","conversation__form",3,"formGroup",4,"ngIf"],["loading",""],["type","button",1,"delete__button",3,"buttonText","click"],[1,"conversation__list"],[1,"conversation__list__items"],["scrollContainer",""],["class","conversation__list__item",3,"ngClass",4,"ngFor","ngForOf"],[1,"conversation__list__item",3,"ngClass"],[1,"conversation__list__item"],[1,"conversation__list__item__date"],[1,"conversation__list__item__profile"],[1,"conversation__list__item__profile__icon"],[1,"conversation__list__item__profile__info"],[1,"conversation__list__item__profile__info__nameDate"],[1,"conversation__list__item__profile__info-name"],[1,"conversation__list__item__profile__info-date"],[1,"conversation__list__item__profile__info-message"],[1,"conversation__form",3,"formGroup"],[1,"conversation__form__control",3,"ngClass"],["id","message","type","text","formControlName","message","autocomplete","message",1,"conversation__form__control__input"],["class","validation",4,"ngIf"],[1,"conversation__form__button-submit"],["type","submit",3,"disabled","buttonText","click"],[1,"validation"],[1,"conversation__modal"],[1,"conversation__modal__title"],[1,"conversation__modal__buttons"],[3,"disabled","buttonText","click"],[3,"buttonText","click"]],template:function(n,i){if(1&n&&(t.TgZ(0,"div",0)(1,"p",1)(2,"a",2),t._uU(3,"Go to Home Page "),t.qZA()(),t.TgZ(4,"div",3)(5,"h2",4),t._uU(6,"Group dialog"),t.qZA(),t.TgZ(7,"div",5)(8,"div",6),t.YNc(9,yt,3,3,"div",7),t.ALo(10,"async"),t.TgZ(11,"button",8),t.NdJ("click",function(){return i.onUpdateConversationMessage()}),t.ALo(12,"async"),t.ALo(13,"async"),t.TgZ(14,"mat-icon"),t._uU(15,"refresh"),t.qZA()()()()(),t.TgZ(16,"div",9),t.YNc(17,wt,4,1,"div",10),t.ALo(18,"async"),t.YNc(19,kt,7,9,"form",11),t.qZA(),t.YNc(20,It,2,0,"ng-template",null,12,t.W1O),t.qZA(),t.TgZ(22,"app-cyber-button",13),t.NdJ("click",function(){return i.openDeleteModal()}),t.qZA(),t.YNc(23,Gt,8,5,"div",7)),2&n){const s=t.MAs(21);t.xp6(2),t.Q6J("routerLink",t.DdM(16,Lt)),t.xp6(7),t.Q6J("ngIf",t.lcZ(10,8,i.countdownSubscription$)),t.xp6(2),t.Q6J("disabled",t.lcZ(12,10,i.isLoading$)||t.lcZ(13,12,i.countdownSubscription$)),t.xp6(6),t.Q6J("ngIf",t.lcZ(18,14,i.items$))("ngIfElse",s),t.xp6(2),t.Q6J("ngIf",i.conversationForm),t.xp6(3),t.Q6J("buttonText","Delete"),t.xp6(1),t.Q6J("ngIf",i.showDeleteModal)}},dependencies:[_.mk,_.sg,_.O5,O.w,c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,f.Hw,p.rH,_.Ov,_.uU,I],styles:['.delete__button[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}.conversation[_ngcontent-%COMP%]{padding:0 1rem;height:100%}.conversation__wrapper[_ngcontent-%COMP%]{height:calc(100% - 5rem);display:flex;justify-content:space-between;flex-direction:column;gap:1rem}.conversation__homepage[_ngcontent-%COMP%]{margin-bottom:1rem}.conversation__homepage__link[_ngcontent-%COMP%]{position:relative;display:block;margin:0 auto;text-align:center;max-width:200px;max-height:71px;color:var(--color-beige);background-color:var(--color-alert);padding:.2rem;font-weight:700;box-shadow:0 1px 1px 1px #00000080;text-decoration:none}.conversation__homepage__link[_ngcontent-%COMP%]:after{content:"";position:absolute;background-color:var(--color-alert);height:1px;width:1600px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.conversation__header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem}.conversation__header__buttons__refresh[_ngcontent-%COMP%]{display:flex;gap:1rem}.conversation__header__buttons__refresh__button[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;background-color:transparent;border:none;cursor:var(--cursor-pointer)}.conversation__header__buttons__refresh__button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:1.6rem;height:1.6rem;font-size:1.6rem}.conversation__list__items[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem;max-height:660px;overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth}.conversation__list__item__date[_ngcontent-%COMP%]{position:relative;text-align:center;max-width:max-content;margin:0 auto;color:var(--color-beige);background-color:var(--color-alert);padding:.2rem;font-size:16px}.conversation__list__item__date[_ngcontent-%COMP%]:after{content:"";position:absolute;background-color:var(--color-alert);height:1px;width:1600px;top:50%;left:50%;transform:translate(-50%,-50%);z-index:-1}.conversation__list__item__profile[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-items:center;gap:.4rem}.conversation__list__item__profile__icon[_ngcontent-%COMP%]{align-self:start}.conversation__list__item__profile__info[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;width:100%}.conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;width:max-content;padding:.4rem .4rem .4rem 1rem;gap:.5rem;background-color:var(--color-high);border-left:12px solid var(--color-alert-trans);font-size:16px;box-shadow:1px 1px 0 1px var(--color-alert-trans)}.conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:5px;width:4px;height:100%;background-color:var(--color-alert-trans)}.conversation__list__item__profile__info-message[_ngcontent-%COMP%]{max-width:70%;font-size:18px;overflow-wrap:break-word;padding:.3rem;text-align:left}.conversation__list__item[_ngcontent-%COMP%]:last-child{animation:_ngcontent-%COMP%_elementChanged 1s ease}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile[_ngcontent-%COMP%]{flex-direction:row-reverse}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile__info[_ngcontent-%COMP%]{align-items:flex-end}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile__info__nameDate[_ngcontent-%COMP%]{flex-direction:row-reverse}.myMessage[_ngcontent-%COMP%]   .conversation__list__item__profile__info-message[_ngcontent-%COMP%]{text-align:right}@keyframes _ngcontent-%COMP%_elementChanged{0%{opacity:0}to{opacity:1}}',".conversation__modal[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:700px;margin:0 auto;padding:2rem 1.5rem;background:var(--color-high-trans);border-radius:10px;min-height:300px;z-index:1;clip-path:polygon(0 0,calc(100% - 115px) 0,100% 115px,100% 100%,60px 100%,0 calc(100% - 60px));-webkit-mask:var(--mask);mask:var(--mask)}.conversation__modal__title[_ngcontent-%COMP%]{padding-top:1rem;padding-bottom:1rem;padding-right:6rem}.conversation__modal__buttons[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:1.5rem}",'.conversation__form[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:1rem}.conversation__form__control[_ngcontent-%COMP%]{color:var(--color-low);width:100%;position:relative;border-left:15px solid var(--color-alert-trans);box-shadow:1px 1px 0 1px var(--color-alert-trans)}.conversation__form__control[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:10px;width:5px;height:100%;background-color:var(--color-alert-trans)}.conversation__form__control__input[_ngcontent-%COMP%]{width:100%;border-color:transparent;background-color:var(--color-high-trans);outline:none;padding:.8rem .8rem .8rem 2rem}.validation[_ngcontent-%COMP%]{color:var(--danger-color);position:absolute;bottom:-1.2rem;left:0}.invalid[_ngcontent-%COMP%]{color:var(--danger-color);border-left:15px solid var(--danger-color);box-shadow:1px 1px 0 1px var(--danger-color)}.invalid[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:1px solid var(--danger-color);outline-color:var(--danger-color)}.invalid[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:10px;width:5px;height:100%;background-color:var(--danger-color)}']})}return o})()}];let At=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.Bz.forChild(St),p.Bz]})}return o})();var Jt=a(153);let Ut=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[_.ez,Jt.m,At]})}return o})()}}]);